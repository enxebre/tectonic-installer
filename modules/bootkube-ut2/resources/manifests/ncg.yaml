apiVersion: v1
kind: Pod
metadata:
  name: ncg
  namespace: kube-system
spec:
  containers:
    - name: node-configuration-generator
      image: quay.io/alberto_lamela/test
      imagePullPolicy: Always
      env:
        - name: NCG_ADDRESS
          value: "0.0.0.0:8080"
        - name: NCG_LOG_LEVEL
          value: "debug"
      ports:
        - name: http
          containerPort: 8080
          hostPort: 8080
      resources:
        requests:
          cpu: "50m"
          memory: "50Mi"
      volumeMounts:
      - name: ncg-config
        mountPath: /var/lib/ncg
  hostNetwork: true
  dnsPolicy: ClusterFirst
  volumes:
  - hostPath:
      path: /opt/tectonic/ncg-config
    name: ncg-config
  imagePullSecrets:
    - name: coreos-pull-secret
  restartPolicy: Always
  terminationGracePeriodSeconds: 30
  tolerations:
  - key: "node-role.kubernetes.io/master"
    operator: "Exists"
    effect: "NoSchedule"
  nodeSelector:
    node-role.kubernetes.io/master: ""
